:root{
  --bg:#0B0F12;        /* deep blue-black */
  --panel:#0D1419;     /* header / panels */
  --card:#121A20;      /* tiles */
  --text:#E7ECEA;      /* primary text */
  --muted:#9AA6A2;     /* secondary text */
  --heading:#DFE8E2;   /* soft mint-white headings */
  --accent:#D2A455;    /* amber accent */
  --accent2:#B5862E;   /* darker amber */
  --chip:#1A2329;      /* chip bg */
}


html,body{margin:0;color:var(--text);background: radial-gradient(1100px 320px at 50% -160px, rgba(210,164,85,0.08), transparent),linear-gradient(var(--bg), var(--bg));font-family:-apple-system,system-ui,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}

/* Glass header */
.header{position:sticky;top:0;z-index:30;background: rgba(13,20,25,0.75);backdrop-filter: blur(16px) saturate(140%);-webkit-backdrop-filter: blur(16px) saturate(140%);border-bottom:1px solid rgba(255,255,255,0.06);padding:calc(8px + env(safe-area-inset-top)) 14px 10px;display:flex;flex-direction:column;align-items:center;gap:6px;}
.header-logo{width:80px;height:auto;display:block;border:none;box-shadow:none;background:transparent}
.subtitle{margin:0;color:var(--muted);font-size:12px}

/* Meta */
.meta-row{ display:flex; gap:10px; align-items:center; justify-content:center; color:rgba(255,255,255,.8); font-size:13px; margin:8px 0 4px; }
.active-filter{color:var(--accent)}

/* Grid & cards */
.main{min-height:100vh;max-width:1100px;margin:0 auto;padding:18px 16px 120px}
.grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
.card{background:var(--card);color:var(--text);border:1px solid rgba(255,255,255,0.06);border-radius:18px;padding:18px;box-shadow:0 14px 36px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,0.03);position:relative;transition: transform 0.35s cubic-bezier(0.22,1,0.36,1),box-shadow 0.35s cubic-bezier(0.22,1,0.36,1);}
.card h3{margin:0 0 6px 0;color:var(--heading);font-size:18px;line-height:1.25;font-weight:600}
.desc{margin:0;color:var(--muted);opacity:.95}
.badges{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px}
.badge{background:rgba(255,255,255,0.08);color:var(--text);border:1px solid rgba(255,255,255,0.12);border-radius:999px;padding:7px 14px;font-size:13px;font-weight:600;letter-spacing:.25px;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);box-shadow:0 2px 6px rgba(0,0,0,.15);transition:all .3s cubic-bezier(0.22,1,0.36,1);}

/* Floating SAFE badge */

.safe-badge svg{flex:0 0 auto}

/* Bottom dock (white glass) */
.filter-dock{
  position: fixed; left:0; right:0; bottom: calc(env(safe-area-inset-bottom) + 12px);
  z-index:50; display:flex; justify-content:center; pointer-events:none;
}
.dock-inner{
  pointer-events:auto; display:flex; align-items:center; gap:10px; padding:8px 10px;
  background: rgba(255,255,255,0.18);
  backdrop-filter: blur(14px) saturate(160%);
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  border: 1px solid rgba(255,255,255,0.28); border-radius:20px;
  box-shadow: 0 12px 28px rgba(0,0,0,.35);
}
.filter-btn{background:rgba(255,255,255,0.10);color:var(--text);border:1px solid rgba(255,255,255,0.22);border-radius:999px;padding:10px 18px;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);box-shadow:0 8px 22px rgba(0,0,0,0.35);transition:all .3s cubic-bezier(0.22,1,0.36,1);}
.filter-btn .dot{ width:8px; height:8px; border-radius:50%; background:#c9a64b; opacity:.8 }

/* Panel slides up (smooth 0.4s) */
.filter-panel { position: fixed; left:0; right:0; bottom: calc(env(safe-area-inset-bottom) + 110px) !important; z-index:49; display:flex; justify-content:center; opacity:0; transform:translateY(8px); pointer-events:none; transition: opacity .4s ease, transform .4s ease; }
.filter-panel.open{ opacity:1; transform:translateY(0); pointer-events:auto; }
.filter-panel .chips{background:rgba(255,255,255,0.06);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:6px 8px;max-width:920px;margin:0 12px;gap:6px;display:flex;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;margin-bottom:20px !important;}
.filter-panel .chips::-webkit-scrollbar{ display:none; }

/* Pills: default white w/ gold outline + gold text; active gold w/ white */
.chip{padding:6px 10px;font-size:12px;border-radius:999px;background:rgba(255,255,255,0.08);color:var(--text);border:1px solid rgba(255,255,255,.10);box-shadow:0 0 5px rgba(0,0,0,.12);white-space:nowrap;}
.chip b{ margin-right:6px }
.chip.active{background:var(--accent);border-color:var(--accent2);color:#121212;box-shadow:0 0 8px rgba(210,164,85,.35)}

.footer{color:#ccc;text-align:center;padding:24px 12px}
.hidden{display:none}

@media (max-width:480px){
  .grid{grid-template-columns:1fr 1fr;gap:12px}
  .card{background:var(--card);color:var(--text);border:1px solid rgba(255,255,255,0.06);border-radius:18px;padding:18px;box-shadow:0 14px 36px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,0.03);position:relative;transition: transform 0.35s cubic-bezier(0.22,1,0.36,1),box-shadow 0.35s cubic-bezier(0.22,1,0.36,1);}
  .header-logo{width:72px}
  .filter-btn{background:rgba(255,255,255,0.10);color:var(--text);border:1px solid rgba(255,255,255,0.22);border-radius:999px;padding:10px 18px;font-size:14px;font-weight:500;display:inline-flex;align-items:center;gap:8px;backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);box-shadow:0 8px 22px rgba(0,0,0,0.35);transition:all .3s cubic-bezier(0.22,1,0.36,1);}
  .filter-panel { position: fixed; left:0; right:0; bottom: calc(env(safe-area-inset-bottom) + 110px) !important; z-index:49; display:flex; justify-content:center; opacity:0; transform:translateY(8px); pointer-events:none; transition: opacity .4s ease, transform .4s ease; }
  .filter-panel .chips{background:rgba(255,255,255,0.06);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:6px 8px;max-width:920px;margin:0 12px;gap:6px;display:flex;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;margin-bottom:20px !important;}
}

  position: absolute !important;
  top: 10px !important;
  right: 10px !important;
  width: 26px !important;
  height: 26px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;

  background: rgba(64,186,108,0.18) !important;
  border: 1px solid rgba(64,186,108,0.35) !important;
  border-radius: 50% !important;
  box-shadow: 0 4px 10px rgba(0,0,0,0.25) !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;

  font-size: 0 !important;   
  color: transparent !important;
  overflow: hidden !important;
  text-indent: -9999px !important;
}



/* === FIXED SAFE BADGE (one check only) === */
  position: absolute !important;
  top: 10px !important;
  right: 10px !important;
  width: 26px !important;
  height: 26px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: rgba(64,186,108,0.18) !important;
  border: 1px solid rgba(64,186,108,0.35) !important;
  border-radius: 50% !important;
  box-shadow: 0 4px 10px rgba(0,0,0,0.25) !important;
  backdrop-filter: blur(6px) !important;
  -webkit-backdrop-filter: blur(6px) !important;
  font-size: 0 !important;
  color: transparent !important;
  text-indent: -9999px !important;
  overflow: hidden !important;
}
  content: "✓" !important;
  font-size: 14px !important;
  font-weight: 700 !important;
  color: #7ED9A0 !important;
  line-height: 1 !important;
}

/* === MORE SPACE BETWEEN PRESETS & FILTER BUTTON === */
.filter-panel { position: fixed; left:0; right:0; bottom: calc(env(safe-area-inset-bottom) + 110px) !important; z-index:49; display:flex; justify-content:center; opacity:0; transform:translateY(8px); pointer-events:none; transition: opacity .4s ease, transform .4s ease; }
.filter-panel .chips {
  margin-bottom: 20px !important;
}

/* === Apple-style Safe badge (inside card) === */
.safe-badge {
  position: absolute !important;
  top: 8px !important;
  right: 8px !important;
  width: 22px !important;
  height: 22px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;

  background: linear-gradient(145deg, #4cd964, #34c759) !important;
  border: none !important;
  border-radius: 50% !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.25), 0 0 6px rgba(76,217,100,0.6) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;

  font-size: 0 !important;
  color: transparent !important;
  text-indent: -9999px !important; /* hide any text nodes */
  overflow: hidden !important;
}
.safe-badge::before {
  content: "✓" !important;
  font-size: 13px !important;
  font-weight: 700 !important;
  color: #ffffff !important;
  line-height: 1 !important;
}

/* === Apple-inspired UI polish === */

/* Cards: softer depth, rounder corners, gentle hover */
.card {
  border-radius: 24px !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.03) !important;
  transition: transform 220ms cubic-bezier(0.22,1,0.36,1), box-shadow 220ms cubic-bezier(0.22,1,0.36,1) !important;
}
.card:hover {
  transform: translateY(-2px) scale(1.01) !important;
  box-shadow: 0 14px 36px rgba(0,0,0,0.32), inset 0 1px 0 rgba(255,255,255,0.03) !important;
}

/* Dock container: cleaner, translucent */
.dock-inner {
  background: rgba(255,255,255,0.72) !important;
  border: none !important;
  border-radius: 22px !important;
  box-shadow: 0 10px 26px rgba(0,0,0,0.28) !important;
  padding: 8px 10px !important;
}

/* Filters button: Apple-style pill */
.filter-btn {
  background: rgba(255,255,255,0.90) !important;
  color: #121212 !important;
  border: none !important;
  border-radius: 999px !important;
  padding: 10px 20px !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 8px !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15) !important;
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease !important;
  -webkit-tap-highlight-color: transparent;
}
.filter-btn:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 6px 14px rgba(0,0,0,0.22) !important;
}
.filter-btn:active {
  transform: translateY(0) scale(.99) !important;
}
.filter-btn .dot {
  width: 8px !important;
  height: 8px !important;
  border-radius: 50% !important;
  background: #D2A455 !important; /* amber by default */
  opacity: 1 !important;
}

/* Active state when panel is open */
#filterToggle[aria-expanded="true"] {
  background: rgba(255,255,255,0.95) !important;
  box-shadow: 0 8px 18px rgba(0,0,0,0.25) !important;
}
#filterToggle[aria-expanded="true"] .dot {
  background: #34c759 !important; /* Apple green when active */
}

/* Filter panel chips: crisper glass */
.filter-panel .chips {
  background: rgba(255,255,255,0.10) !important;
  border: 1px solid rgba(255,255,255,0.14) !important;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25) !important;
  border-radius: 16px !important;
}

/* Keep Apple-style badge inside cards (already defined) but nudge for spacing */
.safe-badge {
  top: 8px !important;
  right: 8px !important;
}

/* === Thicker presets bar & closer to Filters button === */
.filter-panel {
  bottom: calc(env(safe-area-inset-bottom) + 80px) !important; /* was ~110px */
}
.filter-panel .chips {
  padding: 10px 12px !important;     /* thicker bar */
  border-radius: 20px !important; 
  gap: 8px !important;
}
.chip {
  padding: 8px 12px !important;      /* bigger pills */
  font-size: 14px !important;
  border-radius: 999px !important;
}
@media (max-width:480px){
  .filter-panel { bottom: calc(env(safe-area-inset-bottom) + 76px) !important; }
  .filter-panel .chips { padding: 10px 10px !important; border-radius: 18px !important; }
  .chip { padding: 8px 12px !important; font-size: 13.5px !important; }
}

/* === Remove grey dock box and move presets closer === */
.dock-inner {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 !important;
}
.filter-panel {
  bottom: calc(env(safe-area-inset-bottom) + 68px) !important; /* closer to Filters button */
}


/* === THEME VARIABLES === */
:root {
  --bg: #0c0f14;        /* default dark */
  --card-bg: #1a1f24;
  --text-color: #ffffff;
  --accent: #4caf50;
}

body.light{
  --bg:#f7f5ef;          /* off-white (warmer) */
  --panel:#f2efe7;       /* subtle warm panel */
  --card:#fff9ef;        /* ivory cards */
  --text:#143d31;        /* deep green text */
  --muted:#3e5a4b;       /* muted green */
  --heading:#103228;     /* stronger heading green */
  --accent:#2f6e4f;      /* accent green */
  --accent2:#265a40;     /* darker accent */
  --chip:#eef3ea;        /* chip bg in light */
}

/* Apply theme variables globally */
html, body {
  background-color: var(--bg);
  color: var(--text-color);
  transition: background 0.3s ease, color 0.3s ease;
}

.card {
  background-color: var(--card-bg);
  color: var(--text-color);
  transition: background 0.3s ease, color 0.3s ease;
}

.theme-btn {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 1000;
  background: var(--card-bg);
  border: none;
  padding: 0.5rem 0.8rem;
  border-radius: 50%;
  font-size: 1.2rem;
  cursor: pointer;
  color: var(--text-color);
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  transition: background 0.3s ease, color 0.3s ease;
}

/* === THEME TOGGLE: variables and light mode === */
:root{
  --bg:#0B0F12;
  --panel:#0D1419;
  --card:#121A20;
  --text:#E7ECEA;
  --muted:#667074;
  --heading:#DFE8E2;
  --accent:#34c759;   /* Apple green for accents in dark */
  --accent2:#2aa84c;
  --chip:#1A2329;
}

body.light{
  --bg:#f7f5ef;          /* off-white (warmer) */
  --panel:#f2efe7;       /* subtle warm panel */
  --card:#fff9ef;        /* ivory cards */
  --text:#143d31;        /* deep green text */
  --muted:#3e5a4b;       /* muted green */
  --heading:#103228;     /* stronger heading green */
  --accent:#2f6e4f;      /* accent green */
  --accent2:#265a40;     /* darker accent */
  --chip:#eef3ea;        /* chip bg in light */
}

/* Apply variables */
html,body{
  background: radial-gradient(1100px 320px at 50% -160px, rgba(46,107,76,0.08), transparent), linear-gradient(var(--bg), var(--bg));
  color: var(--text);
}

/* Components inherit */
.card{ background: var(--card); color: var(--text); }
.badge{ color: var(--text); }
.subtitle{ color: var(--muted); }
.active-filter{ color: var(--accent); }

/* Filter dock + chips adapt to theme */
.dock-inner{ background: rgba(255,255,255,0.85); }
body.light .dock-inner{ background: rgba(0,0,0,0.06); }
.filter-btn{ color: var(--text); }
.filter-panel .chips{ background: rgba(255,255,255,0.06); border-color: rgba(0,0,0,0.08); }
body.light .filter-panel .chips{ background: rgba(0,0,0,0.04); border-color: rgba(0,0,0,0.06); }

/* Safe badge keeps Apple style but contrast for light */
body.light .safe-badge{
  background: linear-gradient(145deg, #3ddc84, #34c759) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.12), 0 0 6px rgba(76,217,100,0.45) !important;
}

/* Toggle button */
.theme-btn{
  position: fixed;
  top: max(10px, calc(env(safe-area-inset-top) + 8px));
  right: 12px;
  z-index: 1000;
  background: var(--card);
  color: var(--text);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 999px;
  padding: 8px 10px;
  font-size: 14px;
  line-height: 1;
  box-shadow: 0 2px 8px rgba(0,0,0,0.18);
  cursor: pointer;
  user-select: none;
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
}
.theme-btn:hover{ transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,0.2); }
.theme-btn:active{ transform: translateY(0) scale(.98); }

body.light .card{
  border:1px solid rgba(16,50,40,0.08) !important;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.5) !important;
}
body.light .filter-btn{
  background: rgba(255,255,255,0.95) !important;
  color: #143d31 !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.12) !important;
}
body.light .dock-inner{
  background: rgba(0,0,0,0.04) !important;
  box-shadow: 0 6px 16px rgba(0,0,0,0.08) !important;
}

/* Light theme header adjustments */
body.light .header {
  background: rgba(255, 255, 255, 0.92) !important;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.04) !important;
  color: #143d31 !important;
}
body.light .header .title,
body.light .header .subtitle {
  color: #143d31 !important;
}

/* === Progressive blur header (both themes) === */
.header {
  background: linear-gradient(
    to bottom,
    rgba(13, 20, 25, 0.80),
    rgba(13, 20, 25, 0.55)
  ) !important;
  backdrop-filter: blur(20px) saturate(150%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(150%) !important;
  box-shadow: 0 6px 16px rgba(0,0,0,0.28) !important;
  transition: background .3s ease, backdrop-filter .3s ease;
}
body.light .header {
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.75),
    rgba(255, 255, 255, 0.55)
  ) !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.06) !important;
}

/* Stronger subtitle contrast in light mode */
body.light .subtitle {
  color: #1b3b2f !important;
  opacity: 0.85 !important;
}

/* === Color refinements (safe badge + preset chips) === */

/* Softer, premium green for SAFE mark — dark theme */
.safe-badge {
  background: linear-gradient(145deg, #3ba776, #2f6e4f) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.22), 0 0 4px rgba(59,167,118,0.35) !important;
}

/* Softer SAFE in light theme too (slightly lighter tones) */
body.light .safe-badge {
  background: linear-gradient(145deg, #47b584, #2f6e4f) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.12), 0 0 4px rgba(71,181,132,0.30) !important;
}

/* Preset chips: active state in GOLD instead of green */
.chip.active {
  background: #D2A455 !important;   /* golden */
  border-color: #B5862E !important;
  color: #121212 !important;
  box-shadow: 0 0 8px rgba(210,164,85,0.25) !important;
}

/* Keep the Filters button dot golden even when open */
#filterToggle[aria-expanded="true"] .dot {
  background: #D2A455 !important;
}

/* === Smooth scrolling & iOS momentum === */
html { scroll-behavior: smooth; }
.main, .grid {
  -webkit-overflow-scrolling: touch; /* iOS inertial scroll */
}


/* === Card label row & glassy pills === */
.labels{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:8px;
}
/* Base pill */
.pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  font-size:11px;
  font-weight:700;
  border-radius:999px;
  line-height:1;
  user-select:none;
  color:#0f1214;
  background: radial-gradient(120% 140% at 30% 10%, rgba(255,255,255,0.98), rgba(255,255,255,0.90) 60%, rgba(255,255,255,0.86));
  border:1px solid rgba(0,0,0,0.10);
  box-shadow: 0 8px 18px rgba(0,0,0,0.18), inset 0 0 0 0.5px rgba(255,255,255,0.35);
  backdrop-filter: blur(8px) saturate(140%);
  -webkit-backdrop-filter: blur(8px) saturate(140%);
}
/* Category tints */
.pill-dimsum{ background: radial-gradient(120% 140% at 30% 10%, rgba(210,164,85,0.96), rgba(210,164,85,0.86)); }
.pill-starters{ background: radial-gradient(120% 140% at 30% 10%, rgba(120,186,255,0.96), rgba(120,186,255,0.86)); }
.pill-mains{ background: radial-gradient(120% 140% at 30% 10%, rgba(165,235,190,0.96), rgba(165,235,190,0.86)); }
.pill-desserts{ background: radial-gradient(120% 140% at 30% 10%, rgba(255,196,230,0.96), rgba(255,196,230,0.86)); }

/* SAFE indicator (non-overlay) */
.safe-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 10px;
  font-size:11px;
  font-weight:800;
  border-radius:999px;
  line-height:1;
  color:#0b3d20;
  background: radial-gradient(120% 140% at 30% 10%, rgba(76,217,100,0.95), rgba(52,199,89,0.90));
  border:1px solid rgba(0,0,0,0.10);
  box-shadow: 0 8px 18px rgba(0,0,0,0.18), 0 0 0 0.5px rgba(255,255,255,0.35) inset;
}

/* Disable old overlays */
.cat-label{ display:none !important; }
.safe-badge{ display:none !important; }

/* Ensure badges (allergen chips) never overlap labels */
.card .badges{ margin-top:10px; }


/* === Dock active state highlight === */
.filter-btn[data-active="true"]{
  background: rgba(255,255,255,0.95) !important;
  box-shadow: 0 8px 18px rgba(0,0,0,0.25) !important;
}
.filter-btn[data-active="true"] .dot{ background: #34c759 !important; }
#categoryToggle .dot{ background: #D2A455 !important; }
#categoryToggle[data-active="true"] .dot{ background: #D2A455 !important; }

/* === Category chip subtle tints === */
.chip.category{ font-weight:600; }
.chip-starters{ background: rgba(120,186,255,0.18) !important; border:1px solid rgba(120,186,255,0.32) !important; }
.chip-mains{ background: rgba(165,235,190,0.18) !important; border:1px solid rgba(165,235,190,0.32) !important; }
.chip-dimsums{ background: rgba(210,164,85,0.20) !important; border:1px solid rgba(210,164,85,0.34) !important; }
.chip-desserts{ background: rgba(255,196,230,0.20) !important; border:1px solid rgba(255,196,230,0.34) !important; }
.chip.category.active{ background: var(--accent) !important; color:#121212 !important; border-color: var(--accent2) !important; }

/* === Hard-disable blur inside dish cards === */
.card, .card *{ backdrop-filter: none !important; -webkit-backdrop-filter: none !important; filter: none !important; }

/* === Glass allergen tints (all codes) === */
.chip-ce{background:rgba(120,180,120,0.25);border-color:rgba(120,180,120,0.45);}
.chip-cr{background:rgba(200,100,160,0.25);border-color:rgba(200,100,160,0.45);}
.chip-eg{background:rgba(220,180,80,0.25);border-color:rgba(220,180,80,0.45);}
.chip-fi{background:rgba(90,140,220,0.25);border-color:rgba(90,140,220,0.45);}
.chip-ga{background:rgba(160,180,90,0.25);border-color:rgba(160,180,90,0.45);}
.chip-gl{background:rgba(200,70,70,0.25);border-color:rgba(200,70,70,0.45);}
.chip-mo{background:rgba(150,110,200,0.25);border-color:rgba(150,110,200,0.45);}
.chip-mr{background:rgba(120,100,180,0.25);border-color:rgba(120,100,180,0.45);}
.chip-mu{background:rgba(210,140,70,0.25);border-color:rgba(210,140,70,0.45);}
.chip-mi{background:rgba(70,120,200,0.25);border-color:rgba(70,120,200,0.45);}
.chip-nu{background:rgba(120,200,140,0.25);border-color:rgba(120,200,140,0.45);}
.chip-on{background:rgba(160,120,90,0.25);border-color:rgba(160,120,90,0.45);}
.chip-se{background:rgba(180,160,90,0.25);border-color:rgba(180,160,90,0.45);}
.chip-so{background:rgba(90,180,180,0.25);border-color:rgba(90,180,180,0.45);}


/* === Glassy Dish Modal === */

.modal-close{position:absolute;top:10px;right:12px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);border-radius:10px;padding:2px 8px;font-size:18px;color:#fff;cursor:pointer}
.modal-head{display:flex;align-items:center;gap:10px;margin-bottom:8px}
.pill-category{display:none;padding:4px 10px;border-radius:999px;font-size:12px;line-height:1;color:#0c0f14;background:rgba(255,255,255,.88);border:1px solid rgba(255,255,255,.35)}
.badges{display:flex;flex-wrap:wrap;gap:8px}
.modal .chip{backdrop-filter:blur(12px) saturate(160%);-webkit-backdrop-filter:blur(12px) saturate(160%);border-radius:999px;padding:6px 10px;font-size:12px;border:1px solid rgba(255,255,255,.25);color:#fff}

/* Honey tint */
.chip-ho{background:rgba(245,193,108,0.25);border-color:rgba(245,193,108,0.45);}
/* Gold "+" icon button on dock */
.add-btn{
  width: 40px; height: 40px;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius: 999px;
  background: linear-gradient(145deg, #D2A455, #B5862E);
  color: #111;
  font-weight: 800; font-size: 20px; line-height: 1;
  border: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.25), 0 0 10px rgba(210,164,85,0.30);
  cursor: pointer;
  transition: transform .18s ease, box-shadow .18s ease;
  -webkit-tap-highlight-color: transparent;
}
.add-btn:hover{ transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.28), 0 0 12px rgba(210,164,85,0.36); }
.add-btn:active{ transform: translateY(0) scale(.98); }
@media (max-width: 480px){ .dock-inner{ gap:8px; } }

/* === Hotfix: keep text-field styles off checkboxes, fix allergen grid === */
.modal-content input:not([type="checkbox"]), .modal-content textarea{
  box-sizing: border-box; width: 100%; border-radius: 12px;
  border: 1px solid rgba(255,255,255,.22); background: rgba(255,255,255,.10);
  color: #fff; padding: 11px 12px; font-size: 14px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.12);
}
.modal-content input[type="checkbox"]{ width:18px; height:18px; accent-color:#34c759; border:none; background:transparent; box-shadow:none; margin:0; flex:0 0 auto; }
.allergen-fieldset{ overflow:hidden; }
.allergen-list{ display:grid; gap:8px; grid-template-columns: repeat(4, minmax(56px, 1fr)); }
.allergen-list label{ display:flex; align-items:center; gap:10px; font-size:13px; color:#fff; white-space:nowrap; }
@media (max-width: 600px){ .allergen-list{ grid-template-columns: repeat(3, minmax(70px, 1fr)); } }
@media (max-width: 380px){ .allergen-list{ grid-template-columns: repeat(2, minmax(90px, 1fr)); } }


/* ==== Apple Glass Modal — Dark (Option A) ==== */
.modal{
  position: fixed; inset: 0;
  background: radial-gradient(1200px 600px at 50% 10%, rgba(0,0,0,0.55), rgba(0,0,0,0.70));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  display: flex; align-items: center; justify-content: center;
  padding: 24px; z-index: 9999;
}
.modal.hidden{ display:none; }
.modal-content{
  position: relative;
  width: min(92vw, 560px);
  border-radius: 24px;
  padding: 22px 22px 18px;
  color: var(--text);
  background: rgba(17, 22, 26, 0.55);
  box-shadow: 0 24px 60px rgba(0,0,0,0.50), inset 0 0 0 1px rgba(255,255,255,0.06);
  backdrop-filter: blur(24px) saturate(140%);
  -webkit-backdrop-filter: blur(24px) saturate(140%);
  border: 1px solid rgba(255,255,255,0.16);
  transform: translateY(10px);
  opacity: 0;
  animation: modalIn .28s cubic-bezier(.22,1,.36,1) forwards;
}
@keyframes modalIn{ to { transform: translateY(0); opacity: 1; } }
.modal-head{ display:flex; align-items:center; gap:10px; margin-bottom: 14px; }
.modal-head h3{ margin: 0; font-size: 20px; font-weight: 600; color: var(--heading); letter-spacing: .2px; }
.modal-close{
  position: absolute; top: 10px; right: 10px;
  width: 36px; height: 36px; border-radius: 999px;
  display: inline-flex; align-items: center; justify-content: center;
  background: rgba(255,255,255,0.12);
  border: 1px solid rgba(255,255,255,0.18);
  color: var(--text);
  box-shadow: 0 8px 18px rgba(0,0,0,0.28), inset 0 0 0 1px rgba(255,255,255,0.06);
  -webkit-tap-highlight-color: transparent;
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.modal-close:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.16); }
.modal-close:active{ transform: translateY(0) scale(.98); }
.form-grid{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 4px; }
.field.wide{ grid-column: 1 / -1; } .field.half{ grid-column: span 1; }
.field{ display:flex; flex-direction: column; gap: 6px; }
.field .lbl{ font-size: 12px; color: rgba(255,255,255,0.75); letter-spacing: .3px; }
.field input, .field textarea{
  width: 100%; background: rgba(255,255,255,0.10);
  color: var(--text); border: 1px solid rgba(255,255,255,0.18);
  border-radius: 14px; padding: 12px 14px; outline: none;
  transition: box-shadow .2s ease, border-color .2s ease, background .2s ease;
}
.field textarea{ resize: vertical; min-height: 78px; }
.field input::placeholder, .field textarea::placeholder{ color: rgba(255,255,255,0.55); }
.field input:focus, .field textarea:focus{
  border-color: rgba(210,164,85,0.65);
  box-shadow: 0 0 0 3px rgba(210,164,85,0.18), 0 10px 28px rgba(0,0,0,0.24);
  background: rgba(255,255,255,0.12);
}
.allergen-fieldset{ border: none; padding: 0; margin-top: 6px; }
.allergen-fieldset > legend{ font-size: 12px; margin-bottom: 8px; color: rgba(255,255,255,0.75); }
.allergen-list{ display:grid; gap:8px; grid-template-columns: repeat(4, minmax(56px, 1fr)); }
.allergen-list label{ display:flex; align-items:center; gap:10px; font-size:13px; color:var(--text); white-space:nowrap; }
@media (max-width: 600px){ .allergen-list{ grid-template-columns: repeat(3, minmax(70px, 1fr)); } }
@media (max-width: 380px){ .allergen-list{ grid-template-columns: repeat(2, minmax(90px, 1fr)); } }
.form-actions{ display:flex; align-items:center; justify-content: space-between; gap: 10px; margin-top: 14px; }
.btn{ display:inline-flex; align-items:center; gap:8px; padding: 12px 16px; border-radius: 999px; font-weight: 600; cursor:pointer; border:none; }
.btn svg{ width:18px; height:18px; }
.btn-primary{
  background: linear-gradient(145deg, #D2A455, #B5862E);
  color:#111;
  box-shadow: 0 8px 18px rgba(0,0,0,0.24), 0 0 10px rgba(210,164,85,0.28);
  transition: transform .18s ease, box-shadow .18s ease;
}
.btn-primary:hover{ transform: translateY(-1px); box-shadow: 0 12px 24px rgba(0,0,0,0.28), 0 0 12px rgba(210,164,85,0.36); }
.btn-primary:active{ transform: translateY(0) scale(.98); }
.btn-ghost{
  background: rgba(255,255,255,0.10);
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.18);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.btn-ghost:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.14); }
.btn-ghost:active{ transform: translateY(0) scale(.98); }
.hint{ margin: 8px 2px 0; font-size: 12px; color: rgba(255,255,255,0.65); }



/* === Reset button — Apple glass + animation === */
.reset-btn{
  width: 44px; height: 44px; border-radius: 999px;
  display:inline-flex; align-items:center; justify-content:center;
  background: rgba(255,255,255,0.12);
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.20);
  box-shadow: 0 10px 28px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.06);
  backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease, border-color .18s ease;
  position: relative; overflow: visible;
}
.reset-btn svg{ width:20px; height:20px; display:block; transition: transform .25s ease; }
.reset-btn:hover{ transform: translateY(-1px); }
.reset-btn.active::after{
  content:""; position:absolute; inset:-2px; border-radius:999px;
  background: radial-gradient(circle at center, rgba(210,164,85,0.35), rgba(210,164,85,0.0) 70%);
  filter: blur(2px); opacity: 0; animation: resetPulse 1.8s ease-in-out infinite; pointer-events:none;
}
@keyframes resetPulse{ 0%{ transform: scale(0.92); opacity: 0; } 45%{ transform: scale(1.06); opacity: .55; } 100%{ transform: scale(1.10); opacity: 0; } }
.reset-btn.spin svg{ transform: rotate(360deg); transition: transform .6s cubic-bezier(.22,1,.36,1); }



/* === Visual Finesse Pack v1 (parallax, glow, empty state) === */

/* Parallax glass gradients driven by --scrollY */
:root { --scrollY: 0px; }
html, body {
  background:
    radial-gradient(1100px 320px at 50% calc(-160px + (var(--scrollY) * -0.06)), rgba(46,107,76,0.08), transparent),
    linear-gradient(var(--bg), var(--bg));
}
body.light {
  background:
    radial-gradient(1100px 320px at 50% calc(-160px + (var(--scrollY) * -0.06)), rgba(210,164,85,0.08), transparent),
    linear-gradient(var(--bg), var(--bg));
}

/* Footer progressive blur to mirror header */
.footer {
  position: sticky;
  bottom: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.18), rgba(0,0,0,0));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  padding-bottom: calc(24px + env(safe-area-inset-bottom));
}
body.light .footer {
  background: linear-gradient(to top, rgba(255,255,255,0.65), rgba(255,255,255,0));
}

/* Micro-glow for cards and safe state */
.card {
  transition: transform .22s cubic-bezier(.22,1,.36,1), box-shadow .22s cubic-bezier(.22,1,.36,1), outline-color .22s ease;
  outline: 0 solid transparent;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 36px rgba(0,0,0,0.28);
}
.card:focus-within {
  outline-width: 2px;
  outline-color: rgba(210,164,85,0.55);
  outline-offset: 2px;
}
.card:has(.safe-pill) {
  box-shadow: 0 0 0 1px rgba(52,199,89,0.28) inset, 0 10px 24px rgba(52,199,89,0.10);
}
.card:has(.safe-pill):hover {
  box-shadow: 0 0 0 1px rgba(52,199,89,0.38) inset, 0 16px 34px rgba(52,199,89,0.16);
}
body.light .card:has(.safe-pill) {
  box-shadow: 0 0 0 1px rgba(47,110,79,0.26) inset, 0 10px 22px rgba(47,110,79,0.08);
}
body.light .card:has(.safe-pill):hover {
  box-shadow: 0 0 0 1px rgba(47,110,79,0.36) inset, 0 16px 32px rgba(47,110,79,0.12);
}

/* Chips glow */
.chip.category.active {
  box-shadow: 0 0 0 1px rgba(0,0,0,0.06) inset, 0 0 18px rgba(210,164,85,0.28);
}
body.light .chip.category.active {
  box-shadow: 0 0 0 1px rgba(0,0,0,0.06) inset, 0 0 16px rgba(47,110,79,0.28);
}

/* Empty state styling */
.empty {
  display: grid;
  place-items: center;
  gap: 10px;
  text-align: center;
  padding: 26px 12px;
  color: var(--muted);
}
.empty-illustration svg {
  width: 160px;
  height: auto;
  opacity: .9;
  display: block;
  margin: 0 auto 8px;
}
.empty-copy h3 {
  margin: 0 0 6px;
  color: var(--heading);
  font-size: 18px;
  letter-spacing: .2px;
}
.empty-copy p {
  margin: 0;
  font-size: 13.5px;
}
.empty-hint { opacity: .85; }

/* Active filter button glow */
.filter-btn[aria-expanded="true"] {
  box-shadow: 0 8px 18px rgba(0,0,0,0.22), 0 0 0 2px rgba(210,164,85,0.35);
}
body.light .filter-btn[aria-expanded="true"] {
  box-shadow: 0 8px 16px rgba(0,0,0,0.10), 0 0 0 2px rgba(47,110,79,0.25);
}


/* === Elegance v2 — Liquid Glass & Fine Dining polish === */

/* Type scale & letter‑spacing tuned for elegance */
:root {
  --radius-lg: 22px;
  --radius-md: 16px;
  --shadow-soft: 0 8px 22px rgba(0,0,0,.18);
  --shadow-mid: 0 14px 36px rgba(0,0,0,.22);
  --ease-spring: cubic-bezier(.22,1,.36,1);
  --t-100: 12px;   /* captions / chips */
  --t-200: 13.5px; /* small */
  --t-300: 15px;   /* body */
  --t-400: 18px;   /* title */
}

body, .desc { letter-spacing: .2px; font-size: var(--t-300); }
.card h3 { font-size: var(--t-400); letter-spacing: .25px; }

/* Dish cards — calmer elevation and cleaner glass edges */
.card {
  border-radius: var(--radius-lg) !important;
  box-shadow: var(--shadow-soft) !important;
  border: 1px solid color-mix(in srgb, var(--text) 6%, transparent) !important;
  transition: transform .22s var(--ease-spring), box-shadow .22s var(--ease-spring) !important;
}
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-mid) !important; }

/* Liquid‑Glass modals: Clear material per Apple HIG (more translucent, better legibility) */
.modal {
  background: radial-gradient(1200px 640px at 50% 0%, rgba(0,0,0,.50), rgba(0,0,0,.65));
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
.modal-content {
  border-radius: calc(var(--radius-lg) + 2px);
  background: color-mix(in srgb, var(--panel) 60%, rgba(255,255,255,.06));
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 28px 60px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
  backdrop-filter: blur(20px) saturate(140%);
  -webkit-backdrop-filter: blur(20px) saturate(140%);
}

/* Light theme: switch to Clear/Ultra‑thin look */
body.light .modal {
  background: radial-gradient(1200px 640px at 50% 0%, rgba(255,255,255,.55), rgba(255,255,255,.78));
}
body.light .modal-content {
  background: rgba(255,255,255,.72);
  border: 1px solid rgba(0,0,0,.06);
  box-shadow: 0 18px 44px rgba(0,0,0,.12), inset 0 0 0 1px rgba(255,255,255,.45);
}
body.light .modal-content .field .lbl,
body.light .modal-content label { color: #143d31; }

/* Controls inside modals */
.field input, .field textarea {
  border-radius: 14px; 
  transition: background .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.field input:focus, .field textarea:focus {
  border-color: color-mix(in srgb, var(--accent) 60%, transparent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 18%, transparent);
}

/* Chips — pill aesthetics refined, subtle inner stroke */
.chip {
  padding: 7px 12px !important;
  border-radius: 999px !important;
  background: color-mix(in srgb, #fff 8%, transparent);
  border: 1px solid color-mix(in srgb, var(--text) 12%, transparent) !important;
  box-shadow: 0 2px 8px rgba(0,0,0,.10) !important;
}
.chip.active {
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(0,0,0,.18);
}

/* Bottom dock — reduce visual noise, keep premium button feel */
.dock-inner {
  gap: 10px !important;
  background: color-mix(in srgb, #fff 82%, transparent);
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 20px;
  box-shadow: 0 10px 24px rgba(0,0,0,.18);
  padding: 8px 10px !important;
}
body.light .dock-inner {
  background: rgba(255,255,255,.94) !important;
  box-shadow: 0 8px 18px rgba(0,0,0,.10) !important;
}
.filter-btn {
  background: rgba(255,255,255,.92) !important;
  color: #111 !important;
}
body.light .filter-btn { color: #143d31 !important; }

/* Focus rings — tasteful, visible, WCAG‑friendly */
:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--accent) 55%, #a8e4c8);
  outline-offset: 2px;
  border-radius: 12px;
}

/* Empty state typography polish */
.empty-copy h3 { font-weight: 650; }
.empty-copy p { opacity: .92; }

/* Motion timings for pop/tap feedback */
.filter-btn:active, .add-btn:active, .btn:active { transform: translateY(0) scale(.985); }

/* Safe pill refinement */
.safe-pill {
  font-weight: 800;
  letter-spacing: .3px;
  box-shadow: 0 6px 16px rgba(0,0,0,.16), 0 0 0 .5px rgba(255,255,255,.35) inset;
}


/* === Dark Rescue v2 — high-contrast, premium dark === */
/* Force dark theme polish (applies when body is NOT .light) */
body:not(.light) {
  --bg:#0b0f12;
  --panel:#0d1419;
  --card:#11161a;
  --text:#e7ecea;
  --muted:#9aa6a2;
  --heading:#f0f6f2;
  --accent:#d2a455;
  --accent2:#b5862e;
}

/* Background depth: clearer vignette + cleaner base */
/* corrected: apply to body only */
body:not(.light) {
  background:
    radial-gradient(1200px 380px at 50% -180px, rgba(210,164,85,0.10), transparent),
    linear-gradient(var(--bg), var(--bg)) !important;
}

/* Header glass more legible in dark */
body:not(.light) .header {
  background: linear-gradient(to bottom, rgba(13,20,25,0.86), rgba(13,20,25,0.62)) !important;
  border-bottom: 1px solid rgba(255,255,255,0.06) !important;
}
body:not(.light) .subtitle { color: var(--muted) !important; }

/* Cards: stronger contrast, softer shadow */
body:not(.light) .card {
  background: var(--card) !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: 0 12px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,0.03) !important;
}
body:not(.light) .card h3 { color: var(--heading) !important; }
body:not(.light) .desc { color: var(--muted) !important; }

/* Chips: darker base + golden active for visibility */
body:not(.light) .chip {
  background: rgba(255,255,255,0.06) !important;
  border: 1px solid rgba(255,255,255,0.12) !important;
  color: var(--text) !important;
}
body:not(.light) .chip.active {
  background: var(--accent) !important;
  border-color: var(--accent2) !important;
  color: #121212 !important;
}

/* Dock & filter buttons: reduce haze, increase legibility */
body:not(.light) .dock-inner {
  background: rgba(255,255,255,0.14) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  box-shadow: 0 10px 24px rgba(0,0,0,0.42) !important;
}
body:not(.light) .filter-btn {
  background: rgba(255,255,255,0.12) !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,0.20) !important;
}

/* Modal overlay/content: darker veil, brighter content panel */
body:not(.light) .modal {
  background: radial-gradient(1200px 640px at 50% 0%, rgba(0,0,0,.60), rgba(0,0,0,.75)) !important;
}
body:not(.light) .modal-content {
  background: rgba(17,22,26,0.62) !important;
  border: 1px solid rgba(255,255,255,0.16) !important;
  box-shadow: 0 24px 60px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,255,0.06) !important;
}
body:not(.light) .modal-content .lbl,
body:not(.light) .modal-content legend,
body:not(.light) .modal-content label {
  color: rgba(255,255,255,0.82) !important;
}
body:not(.light) .modal-content input:not([type="checkbox"]),
body:not(.light) .modal-content textarea {
  background: rgba(255,255,255,0.10) !important;
  border: 1px solid rgba(255,255,255,0.20) !important;
  color: var(--text) !important;
}

/* Buttons inside modal */
body:not(.light) .btn-ghost {
  background: rgba(255,255,255,0.10) !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
}
body:not(.light) .btn-primary {
  background: linear-gradient(145deg, var(--accent), var(--accent2)) !important;
  color: #111 !important;
}

/* Footer: darker gradient for balance */
body:not(.light) .footer {
  background: linear-gradient(to top, rgba(0,0,0,0.22), rgba(0,0,0,0)) !important;
}

/* Active state halos */
body:not(.light) .filter-btn[aria-expanded="true"] {
  box-shadow: 0 8px 18px rgba(0,0,0,.35), 0 0 0 2px rgba(210,164,85,0.32) !important;
}


/* === Theme Fix v3: strong dark background override === */
/* Force dark background when body does NOT have .light */
body:not(.light) {
  background:
    radial-gradient(1200px 380px at 50% -180px, rgba(210,164,85,0.10), transparent),
    linear-gradient(var(--bg), var(--bg)) !important;
}


/* === Canton Theme v1 — fixes + Cantonese polish === */
/* Strong hide for empty state when JS marks it hidden */
#empty.hidden { display: none !important; }

/* Canton palette */
:root {
  --canton-red: #B33A2F;     /* cinnabar */
  --canton-red-deep: #8E2A22; 
  --canton-gold: #D2A455; 
  --canton-ink: #0c0f14;
}

/* Cards: subtle lacquer top rail + faint pattern */
.card {
  position: relative;
  background-image:
    radial-gradient(120% 160% at 80% -20%, rgba(210,164,85,0.06), transparent),
    repeating-linear-gradient(135deg, rgba(255,255,255,0.02) 0, rgba(255,255,255,0.02) 2px, transparent 2px, transparent 6px);
  overflow: hidden;
}
.card::before {
  content: ""; position: absolute; left: 0; right: 0; top: 0; height: 3px;
  background: linear-gradient(90deg, var(--canton-gold), rgba(210,164,85,0.0), var(--canton-gold));
  opacity: .65;
}
/* Corner brackets (very subtle) */
.card::after {
  content: ""; position: absolute; inset: 10px; pointer-events: none;
  border: 1px solid rgba(210,164,85,0.12);
  border-radius: 18px;
  mask: linear-gradient(#000 0 0) subtract, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) subtract, linear-gradient(#000 0 0);
  opacity: .6;
}

/* Headings: slight cinnabar accent underline on hover */
.card h3 {
  position: relative;
}
.card h3::after {
  content:""; position:absolute; left:0; bottom:-6px; width: 26px; height:2px;
  background: linear-gradient(90deg, var(--canton-red), transparent);
  opacity: .0; transition: opacity .25s ease, transform .25s ease;
  transform: translateY(2px);
}
.card:hover h3::after { opacity:.65; transform: translateY(0); }

/* Category pill (on card label row) — cinnabar tint */
.pill.pill-category, .pill-category { 
  display:inline-flex; 
  background: linear-gradient(145deg, rgba(179,58,47,0.92), rgba(142,42,34,0.92)); 
  color:#fff; 
  border:1px solid rgba(255,255,255,0.18);
}

/* Panel chips: color mapping per category */
.chip.category { font-weight:600; }
.chip-starters  { background: rgba(179,58,47,0.16) !important; border:1px solid rgba(179,58,47,0.38) !important; }
.chip-mains     { background: rgba(210,164,85,0.18) !important; border:1px solid rgba(210,164,85,0.34) !important; }
.chip-desserts  { background: rgba(255,196,230,0.18) !important; border:1px solid rgba(255,196,230,0.34) !important; }
.chip-dimsums   { background: rgba(165,235,190,0.18) !important; border:1px solid rgba(165,235,190,0.34) !important; }
.chip-sauces    { background: rgba(120,186,255,0.18) !important; border:1px solid rgba(120,186,255,0.34) !important; }
.chip-sides     { background: rgba(140,160,200,0.18) !important; border:1px solid rgba(140,160,200,0.34) !important; }
.chip-specials  { background: rgba(210,164,85,0.22) !important; border:1px solid rgba(210,164,85,0.42) !important; }

/* Active state keeps gold */
.chip.category.active {
  background: var(--canton-gold) !important;
  color: #121212 !important;
  border-color: color-mix(in srgb, var(--canton-gold) 80%, #B5862E) !important;
}

/* Dock panel container: slight gold tint for clarity on dark */
.filter-panel .chips {
  box-shadow: 0 8px 24px rgba(0,0,0,0.28) !important;
}

/* Empty state spacing tuned (but hidden via JS when dishes exist) */
.empty { margin: 20px auto; }


/* === Canton Theme v1.1 — empty-state fix + chip colors === */
/* Empty should be invisible by default unless JS reveals it */
#empty { display: none; }
#empty.show { display: grid; }

/* Dock chip colors — clearer tints + readable text */
.chip.category {
  color: #e9eef0 !important;
  font-weight: 700 !important;
}
.chip-starters  { background: rgba(179,58,47,0.26) !important; border:1px solid rgba(179,58,47,0.46) !important; }
.chip-mains     { background: rgba(210,164,85,0.26) !important; border:1px solid rgba(210,164,85,0.46) !important; color:#1a1a1a !important; }
.chip-desserts  { background: rgba(255,196,230,0.22) !important; border:1px solid rgba(255,196,230,0.42) !important; }
.chip-dimsums   { background: rgba(71,181,132,0.24) !important; border:1px solid rgba(71,181,132,0.44) !important; }
.chip-sauces    { background: rgba(120,186,255,0.22) !important; border:1px solid rgba(120,186,255,0.40) !important; }
.chip-sides     { background: rgba(140,160,200,0.22) !important; border:1px solid rgba(140,160,200,0.40) !important; }
.chip-specials  { background: rgba(210,164,85,0.30) !important; border:1px solid rgba(210,164,85,0.50) !important; color:#1a1a1a !important; }

/* Allergen chips inside Filters panel (tinted by code) */
#chips .chip { color:#e9eef0; font-weight:600; }
#chips .chip.ce{ background:rgba(120,180,120,0.25) !important; border-color:rgba(120,180,120,0.45) !important; }
#chips .chip.cr{ background:rgba(200,100,160,0.25) !important; border-color:rgba(200,100,160,0.45) !important; }
#chips .chip.eg{ background:rgba(220,180,80,0.25) !important; border-color:rgba(220,180,80,0.45) !important; }
#chips .chip.fi{ background:rgba(90,140,220,0.25) !important; border-color:rgba(90,140,220,0.45) !important; }
#chips .chip.ga{ background:rgba(160,180,90,0.25) !important; border-color:rgba(160,180,90,0.45) !important; }
#chips .chip.gl{ background:rgba(200,70,70,0.25) !important; border-color:rgba(200,70,70,0.45) !important; }
#chips .chip.mo{ background:rgba(150,110,200,0.25) !important; border-color:rgba(150,110,200,0.45) !important; }
#chips .chip.mr{ background:rgba(120,100,180,0.25) !important; border-color:rgba(120,100,180,0.45) !important; }
#chips .chip.mu{ background:rgba(210,140,70,0.25) !important; border-color:rgba(210,140,70,0.45) !important; }
#chips .chip.mi{ background:rgba(70,120,200,0.25) !important; border-color:rgba(70,120,200,0.45) !important; }
#chips .chip.nu{ background:rgba(120,200,140,0.25) !important; border-color:rgba(120,200,140,0.45) !important; }
#chips .chip.on{ background:rgba(160,120,90,0.25) !important; border-color:rgba(160,120,90,0.45) !important; }
#chips .chip.se{ background:rgba(180,160,90,0.25) !important; border-color:rgba(180,160,90,0.45) !important; }
#chips .chip.so{ background:rgba(90,180,180,0.25) !important; border-color:rgba(90,180,180,0.45) !important; }

/* Card lacquer tweaks */
.card::before { height: 2px; opacity: .7; }
.card h3::after { height: 1.5px; opacity: .0; }
.card:hover h3::after { opacity: .85; }

/* Floating chips panel clarity */
.filter-panel .chips {
  box-shadow: 0 8px 24px rgba(0,0,0,0.28) !important;
  background: rgba(20,24,28,0.72) !important;
  border: 1px solid rgba(255,255,255,0.08) !important;
}
body.light .filter-panel .chips {
  background: rgba(255,255,255,0.86) !important;
  border: 1px solid rgba(0,0,0,0.06) !important;
}
